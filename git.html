<html>
    <head>
        <title>Git</title>

        <!-- Speed optimization -->
        <link rel="dns-prefetch" href="https://www.canada.ca">
        <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">

        <!-- Meta -->
        <meta charset="utf-8" />

        <!-- Style -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/octicons-css@19.8.0/octicons.min.css" integrity="sha256-s92JV1quA8D0bkOxnRHJ8S0aAacjMHYgCGkUFJAk/9s=" crossorigin="anonymous">

        <link href="https://www.canada.ca/etc/designs/canada/wet-boew/assets/favicon.ico" rel="icon" type="image/x-icon" />
        
    </head>
    <body>
        <header>
            <nav class="navbar border-bottom navbar-expand-lg">
                <div class="container">
                    <a class="navbar-brand" href="https://github.com/dnd-mdn">dnd-mdn</a>
                </div>
            </nav>
        </header>
    
        <main>
            <div class="container">
                <h1 class="h3 mt-4">GIT</h1>

                <div class="row">
                    <div class="col">
                        <ul class="list-group">
                            <li class="list-group-item list-group-item-light">Local data</li>

                            <li class="list-group-item d-flex justify-content-between align-items-center">
                              local - <a href="#">Pull</a>
                              <span class="badge text-bg-primary rounded-pill">0.00 KB</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                              remote
                              <span class="badge text-bg-primary rounded-pill">2</span>
                            </li>
                          </ul>
                    </div>
                    <div class="col">
                        <ul class="list-group">
                            <li class="list-group-item list-group-item-light">Remote</li>

                            <li class="list-group-item d-flex justify-content-between align-items-center">
                              local - <a href="#">Pull</a>
                              <span class="badge text-bg-primary rounded-pill">0.00 KB</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                              remote
                              <span class="badge text-bg-primary rounded-pill">2</span>
                            </li>
                          </ul>
                    </div>
                </div>
                

                
            </div>
        </main>


        <script src="https://unpkg.com/@isomorphic-git/lightning-fs"></script>
        <script src="https://unpkg.com/isomorphic-git@beta"></script>
        <script type="module">

  
            import http from 'https://unpkg.com/isomorphic-git@beta/http/web/index.js'
            // Initialize isomorphic-git with a file system
            window.fs = new LightningFS('fs', { wipe: true })
            // I prefer using the Promisified version honestly
            window.pfs = window.fs.promises

            const dir = '/schema'

            /*await git.clone({
                fs,
                http,
                dir,
                corsProxy: 'https://cors.isomorphic-git.org',
                url: 'https://github.com/dnd-mdn/mobile',
                ref: 'main',
                singleBranch: true,
                depth: 10
            });*/

            // Now it should not be empty...
            const test = await pfs.readdir(dir);
            const file = await pfs.readFile(`${dir}/README.md`, 'utf8');
            console.log(test);
            console.log(file)

            let status = await git.status({ fs, dir, filepath: 'README.md' })
            console.log(status)

        </script>

    </body>
</html>